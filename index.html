<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mani & Abisai Time Tracker</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f8f9fa;
            color: #333;
            line-height: 1.6;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
            padding: 25px;
            background: linear-gradient(135deg, #4b6cb7 0%, #182848 100%);
            color: white;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }
        
        h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }
        
        .description {
            font-size: 1.2rem;
            opacity: 0.9;
            max-width: 700px;
            margin: 0 auto;
        }
        
        .summary-cards {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .card {
            flex: 1;
            min-width: 200px;
            background: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.08);
        }
        
        .card h3 {
            font-size: 1.1rem;
            margin-bottom: 10px;
            color: #4b6cb7;
        }
        
        .card p {
            font-size: 2rem;
            font-weight: bold;
            color: #182848;
        }
        
        .filters {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-bottom: 25px;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.08);
            align-items: end;
        }
        
        .filter-group {
            flex: 1;
            min-width: 200px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #2c3e50;
        }
        
        input, select {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 16px;
        }
        
        button {
            background: #4b6cb7;
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: background 0.3s;
        }
        
        button:hover {
            background: #3a5a9f;
        }
        
        .entries-section {
            background: white;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
        }
        
        th, td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid #e9ecef;
        }
        
        th {
            background-color: #f8f9fa;
            font-weight: 600;
            color: #2c3e50;
            position: sticky;
            top: 0;
        }
        
        tr:hover {
            background-color: #f8f9fa;
        }
        
        .person-mani {
            border-left: 4px solid #4b6cb7;
        }
        
        .person-abisai {
            border-left: 4px solid #28a745;
        }
        
        .total-row {
            font-weight: bold;
            background-color: #f1f8ff;
        }
        
        @media (max-width: 768px) {
            th, td {
                padding: 10px;
            }
            
            .mobile-hidden {
                display: none;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Mani & Abisai Time Tracker</h1>
            <p class="description">Track time spent on project tasks</p>
        </header>
        
        <div class="summary-cards">
            <div class="card">
                <h3>Total Tasks</h3>
                <p id="total-tasks">0</p>
            </div>
            <div class="card">
                <h3>Mani's Hours</h3>
                <p id="mani-hours">0</p>
            </div>
            <div class="card">
                <h3>Abisai's Hours</h3>
                <p id="abisai-hours">0</p>
            </div>
            <div class="card">
                <h3>Total Hours</h3>
                <p id="total-hours">0</p>
            </div>
        </div>
        
        <div class="filters">
            <div class="filter-group">
                <label for="filter-person">Filter by Person</label>
                <select id="filter-person">
                    <option value="all">All People</option>
                    <option value="Mani">Mani</option>
                    <option value="Abisai">Abisai</option>
                </select>
            </div>
            
            <div class="filter-group">
                <label for="filter-date">Filter by Date</label>
                <input type="date" id="filter-date">
            </div>
            
            <div class="filter-group">
                <label for="search">Search Tasks</label>
                <input type="text" id="search" placeholder="Search tasks...">
            </div>
            
            <div class="filter-group">
                <button id="reset-filters">Reset Filters</button>
            </div>
        </div>
        
        <div class="entries-section">
            <h2>Time Log</h2>
            
            <div style="overflow-x: auto;">
                <table id="entries-table">
                    <thead>
                        <tr>
                            <th>Person</th>
                            <th>Date</th>
                            <th>Hours</th>
                            <th>Task</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Entries will be added here dynamically -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const entriesTable = document.getElementById('entries-table').getElementsByTagName('tbody')[0];
            const totalTasksElem = document.getElementById('total-tasks');
            const maniHoursElem = document.getElementById('mani-hours');
            const abisaiHoursElem = document.getElementById('abisai-hours');
            const totalHoursElem = document.getElementById('total-hours');
            const filterPerson = document.getElementById('filter-person');
            const filterDate = document.getElementById('filter-date');
            const searchInput = document.getElementById('search');
            const resetFiltersBtn = document.getElementById('reset-filters');
            
            // Python object array (simulated)
            const timeEntries = [
                {name: "Mani", date: "2025-08-21", hours: 2.0, task: "1st Meeting/Connect thru Github"},
                {name: "Abisai", date: "2025-08-21", hours: 2.0, task: "1st Meeting/Connect thru Github"},
                {name: "Mani", date: "2025-08-25", hours: 2.0, task: "Created Flashcard+Time-Log"},
                {name: "Abisai", date: "2025-08-25", hours: 2.0, task: "Set up subpage"}
            ];
            
            // Render entries and update totals
            renderEntries();
            updateTotals();
            
            // Add event listeners for filters
            filterPerson.addEventListener('change', renderEntries);
            filterDate.addEventListener('change', renderEntries);
            searchInput.addEventListener('input', renderEntries);
            resetFiltersBtn.addEventListener('click', resetFilters);
            
            // Function to properly format date without timezone issues
            function formatDate(dateString) {
                // Split the date string into parts
                const parts = dateString.split('-');
                if (parts.length !== 3) return dateString;
                
                const year = parseInt(parts[0]);
                const month = parseInt(parts[1]) - 1; // Months are 0-indexed in JavaScript
                const day = parseInt(parts[2]);
                
                // Create a date object with the correct values
                const date = new Date(year, month, day);
                
                // Format the date to avoid timezone issues
                return date.toLocaleDateString('en-US', {
                    year: 'numeric',
                    month: 'short',
                    day: 'numeric'
                });
            }
            
            // Render all time entries based on filters
            function renderEntries() {
                entriesTable.innerHTML = '';
                
                const personFilter = filterPerson.value;
                const dateFilter = filterDate.value;
                const searchFilter = searchInput.value.toLowerCase();
                
                let filteredEntries = timeEntries.filter(entry => {
                    if (personFilter !== 'all' && entry.name !== personFilter) return false;
                    if (dateFilter && entry.date !== dateFilter) return false;
                    if (searchFilter && !entry.task.toLowerCase().includes(searchFilter)) return false;
                    return true;
                });
                
                // Render table view
                filteredEntries.forEach((entry) => {
                    const row = entriesTable.insertRow();
                    
                    // Add class based on person
                    if (entry.name === 'Mani') {
                        row.classList.add('person-mani');
                    } else {
                        row.classList.add('person-abisai');
                    }
                    
                    const nameCell = row.insertCell(0);
                    const dateCell = row.insertCell(1);
                    const hoursCell = row.insertCell(2);
                    const taskCell = row.insertCell(3);
                    
                    nameCell.textContent = entry.name;
                    
                    // Use the fixed date formatting function
                    dateCell.textContent = formatDate(entry.date);
                    
                    hoursCell.textContent = entry.hours;
                    taskCell.textContent = entry.task;
                });
                
                updateTotals();
            }
            
            // Update the totals
            function updateTotals() {
                const personFilter = filterPerson.value;
                const dateFilter = filterDate.value;
                const searchFilter = searchInput.value.toLowerCase();
                
                let maniHours = 0;
                let abisaiHours = 0;
                let totalTasks = 0;
                
                timeEntries.forEach(entry => {
                    if (personFilter !== 'all' && entry.name !== personFilter) return;
                    if (dateFilter && entry.date !== dateFilter) return;
                    if (searchFilter && !entry.task.toLowerCase().includes(searchFilter)) return;
                    
                    totalTasks++;
                    
                    if (entry.name === 'Mani') {
                        maniHours += entry.hours;
                    } else {
                        abisaiHours += entry.hours;
                    }
                });
                
                maniHoursElem.textContent = maniHours.toFixed(1);
                abisaiHoursElem.textContent = abisaiHours.toFixed(1);
                totalHoursElem.textContent = (maniHours + abisaiHours).toFixed(1);
                totalTasksElem.textContent = totalTasks;
            }
            
            // Reset all filters
            function resetFilters() {
                filterPerson.value = 'all';
                filterDate.value = '';
                searchInput.value = '';
                renderEntries();
            }
        });
    </script>
</body>
</html>